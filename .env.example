# Jira MCP Auth Bridge - Example Environment Variables
# Copy this file to .env and fill in your values

# --- Server Configuration ---
# Port for the server to listen on
PORT=3000

# --- Atlassian OAuth / Jira API Configuration ---
# Atlassian OAuth 2.0 client ID (from developer.atlassian.com)
VITE_JIRA_CLIENT_ID=YOUR_CLIENT_ID_HERE
# Atlassian OAuth 2.0 client secret (keep this secret!)
JIRA_CLIENT_SECRET=ATOA_YOUR_SECRET_HERE
# OAuth 2.0 scopes for Jira API access (space-separated)
VITE_JIRA_SCOPE="read:jira-work write:jira-work offline_access"
# OAuth 2.0 callback URL (must match Atlassian app config)
# Pattern: {BASE_URL}/auth/callback/{provider}
VITE_JIRA_CALLBACK_URL=http://localhost:3000/auth/callback/atlassian
# Base URL for Jira Cloud API
VITE_JIRA_API_URL=https://api.atlassian.com/ex/jira

# --- Figma OAuth Configuration (REQUIRED) ---
# Figma OAuth 2.0 client ID (from figma.com/developers/apps)
FIGMA_CLIENT_ID=YOUR_FIGMA_CLIENT_ID_HERE
# Figma OAuth 2.0 client secret (keep this secret!)
FIGMA_CLIENT_SECRET=YOUR_FIGMA_CLIENT_SECRET_HERE
# OAuth 2.0 scopes for Figma API access (space-separated)
# Callback URL for Figma: {VITE_AUTH_SERVER_URL}/auth/callback/figma
FIGMA_OAUTH_SCOPES="file_content:read file_metadata:read file_comments:read file_comments:write current_user:read"

# --- Google Drive OAuth Configuration (OPTIONAL) ---
# Google OAuth 2.0 client ID (from console.cloud.google.com)
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID_HERE
# Google OAuth 2.0 client secret (keep this secret!)
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET_HERE
# OAuth 2.0 scopes for Google Drive API access
# Callback URL for Google: {VITE_AUTH_SERVER_URL}/auth/callback/google
GOOGLE_OAUTH_SCOPES="https://www.googleapis.com/auth/drive"

# --- Google Service Account Configuration (OPTIONAL - for REST API) ---
# Google Service Account JSON for server-to-server authentication
# Used by REST API to access Google Docs linked in Jira epics
# See docs/google-service-account.md for setup instructions
# Format: Single-line JSON string with escaped quotes
# GOOGLE_SERVICE_ACCOUNT_JSON='{"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}'

# Google Service Account (Encrypted) - RECOMMENDED over plaintext JSON
# Encrypted service account credentials for secure storage
# Generate using: http://localhost:3000/google-service-encrypt
# Format: RSA-ENCRYPTED:<base64-encoded-encrypted-credentials>
# See docs/google-service-account-encryption.md for setup instructions
# GOOGLE_SERVICE_ACCOUNT_ENCRYPTED=RSA-ENCRYPTED:eyJhbGci...
# Note: RSA keys are auto-generated in cache/keys/google-rsa/ on first use

# --- OAuth Server Configuration ---
# Base URL for this OAuth server (used in client registration/discovery)
VITE_AUTH_SERVER_URL=http://localhost:3000

# --- AI/LLM Configuration (REQUIRED for API endpoints) ---
# Anthropic API Key - get from https://console.anthropic.com/settings/keys
# Required for write-shell-stories, write-epics-next-story, and analyze-feature-scope APIs
ANTHROPIC_API_KEY=sk-ant-...

# --- Testing & Development Variables ---
# Forces short (6-minute) JWT expiration for testing refresh flows
# TEST_SHORT_AUTH_TOKEN_EXP=360
# Enable JWT expiration checking (set to false to disable in development)
# CHECK_JWT_EXPIRATION=true
# Override cache directory location (development only)
# DEV_CACHE_DIR=./cache
# Enable Figma token debugging (logs token details)
# DEBUG_FIGMA_TOKEN=true

# --- Test/Integration Variables (for local/integration tests only) ---
# Atlassian Personal Access Token for test user (base64-encoded email:token)
# Generate: echo -n "your.email@example.com:ATATT..." | base64
# See: https://bitovi.atlassian.net/wiki/spaces/agiletraining/pages/1302462817/How+to+create+a+Jira+Request+token
# ATLASSIAN_TEST_PAT="<base64-encoded-credentials>"
# Jira Issue Key for test issue (for integration tests)
# JIRA_TEST_ISSUE_KEY=PLAY-29

# Figma Personal Access Token (PAT) - get from https://www.figma.com/settings (Personal access tokens section)
# FIGMA_TEST_PAT=figd_...
# Figma test file URL (full URL with node-id) - used for E2E tests and PAT validation
# FIGMA_TEST_URL=https://www.figma.com/design/3JgSzy4U8gdIGm1oyHiovy/TaskFlow?node-id=0-321

# --- Session & JWT Security ---
# Secret for encrypting Express sessions (change in production!)
SESSION_SECRET=changeme_in_production
# Secret for signing JWTs (change in production!)
JWT_SECRET=devsecret_change_in_production

# --- Figma Integration (Optional) ---
# Figma OAuth 2.0 client ID (from figma.com app settings)
FIGMA_CLIENT_ID=YOUR_FIGMA_CLIENT_ID_HERE
# Figma OAuth 2.0 client secret (keep this secret!)
FIGMA_CLIENT_SECRET=YOUR_FIGMA_SECRET_HERE
# OAuth 2.0 scopes for Figma API access (comma-separated)
FIGMA_OAUTH_SCOPES="file_content:read,file_comments:read,file_comments:write"

# --- Runtime Configuration ---
# Whether to check JWT expiration (set to 'true' to enable)
# CHECK_JWT_EXPIRATION=false
# Environment designation for deployment (staging, production, etc.)
# VITE_STATUS_REPORTS_ENV=development

# --- Error Monitoring (Optional) ---
# Sentry DSN for backend error monitoring
# BACKEND_SENTRY_DSN=YOUR_SENTRY_DSN_HERE

# --- Feature Flags ---
# Enable split shell story prompts (set to 'true' to enable)
# USE_SPLIT_SHELL_STORY_PROMPTS=false
# Save Figma comments to cache for debugging (set to 'true' to enable)
# SAVE_FIGMA_COMMENTS_TO_CACHE=false
# Save Figma sticky notes to cache for debugging (set to 'true' to enable)
# SAVE_FIGMA_NOTES_TO_CACHE=false
# Save Figma semantic XML to cache for debugging (set to 'true' to enable)
# SAVE_FIGMA_SEMANTIC_XML_TO_CACHE=false