# Jira MCP Auth Bridge - Example Environment Variables
# Copy this file to .env and fill in your values

# --- Server Configuration ---
# Port for the server to listen on
PORT=3000

# --- Atlassian OAuth / Jira API Configuration ---
# Atlassian OAuth 2.0 client ID (from developer.atlassian.com)
VITE_JIRA_CLIENT_ID=YOUR_CLIENT_ID_HERE
# Atlassian OAuth 2.0 client secret (keep this secret!)
JIRA_CLIENT_SECRET=ATOA_YOUR_SECRET_HERE
# OAuth 2.0 scopes for Jira API access (space-separated)
VITE_JIRA_SCOPE="read:jira-work write:jira-work offline_access"
# OAuth 2.0 callback URL (must match Atlassian app config)
# Pattern: {BASE_URL}/auth/callback/{provider}
VITE_JIRA_CALLBACK_URL=http://localhost:3000/auth/callback/atlassian
# Base URL for Jira Cloud API
VITE_JIRA_API_URL=https://api.atlassian.com/ex/jira

# --- Figma OAuth Configuration (REQUIRED) ---
# Figma OAuth 2.0 client ID (from figma.com/developers/apps)
FIGMA_CLIENT_ID=YOUR_FIGMA_CLIENT_ID_HERE
# Figma OAuth 2.0 client secret (keep this secret!)
FIGMA_CLIENT_SECRET=YOUR_FIGMA_CLIENT_SECRET_HERE
# OAuth 2.0 scopes for Figma API access (space-separated)
# Callback URL for Figma: {VITE_AUTH_SERVER_URL}/auth/callback/figma
FIGMA_OAUTH_SCOPES="file_content:read file_metadata:read file_comments:read file_comments:write current_user:read"

# --- Google Drive OAuth Configuration (OPTIONAL) ---
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID_HERE
GOOGLE_CLIENT_SECRET=YOUR_GOOGLE_CLIENT_SECRET_HERE
GOOGLE_OAUTH_SCOPES="https://www.googleapis.com/auth/drive"

# --- Google Service Account (OPTIONAL - for REST API) ---
# Encrypted service account for server-to-server Google Docs access
# Encrypt at: http://localhost:3000/encrypt
# See: docs/google-drive-setup.md
# GOOGLE_SERVICE_ACCOUNT_ENCRYPTED=RSA-ENCRYPTED:eyJhbGci...

# --- Encryption Keys (REQUIRED for /encrypt endpoint) ---
# RSA-4096 public and private keys for encrypting sensitive credentials
# Generate using: ./scripts/generate-rsa-keys.sh
# Format: Base64-encoded PEM keys (multi-line PEM files encoded as single-line base64)
# See docs/encryption-setup.md for detailed setup instructions
# 
# Example:
# RSA_PUBLIC_KEY=LS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS0KTUlJQ0lqQU5CZ2txaGtpRzl3MEJ...
# RSA_PRIVATE_KEY=LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lH...
#
# Note: Keys are REQUIRED to use /encrypt endpoint
#       If not configured, encryption features will be gracefully disabled
#       Use different keys for development, staging, and production

# --- OAuth Server Configuration ---
# Base URL for this OAuth server (used in client registration/discovery)
VITE_AUTH_SERVER_URL=http://localhost:3000

# --- AI/LLM Configuration (REQUIRED for API endpoints) ---
# Anthropic API Key - get from https://console.anthropic.com/settings/keys
# Required for write-shell-stories, write-epics-next-story, and analyze-feature-scope APIs
ANTHROPIC_API_KEY=sk-ant-...

# --- Testing & Development Variables ---
# Forces short (6-minute) JWT expiration for testing refresh flows
# TEST_SHORT_AUTH_TOKEN_EXP=360
# Enable JWT expiration checking (set to false to disable in development)
# CHECK_JWT_EXPIRATION=true
# Override cache directory location (development only)
# DEV_CACHE_DIR=./cache
# Enable Figma token debugging (logs token details)
# DEBUG_FIGMA_TOKEN=true

# --- Test/Integration Variables (for local/integration tests only) ---
# Atlassian Personal Access Token for test user (base64-encoded email:token)
# Generate: echo -n "your.email@example.com:ATATT..." | base64
# See: https://bitovi.atlassian.net/wiki/spaces/agiletraining/pages/1302462817/How+to+create+a+Jira+Request+token
# ATLASSIAN_TEST_PAT="<base64-encoded-credentials>"
# Jira Issue Key for test issue (for integration tests)
# JIRA_TEST_ISSUE_KEY=PLAY-29

# Figma Personal Access Token (PAT) - get from https://www.figma.com/settings (Personal access tokens section)
# FIGMA_TEST_PAT=figd_...
# Figma test file URL (full URL with node-id) - used for E2E tests and PAT validation
# FIGMA_TEST_URL=https://www.figma.com/design/3JgSzy4U8gdIGm1oyHiovy/TaskFlow?node-id=0-321

# --- Session & JWT Security ---
# Secret for encrypting Express sessions (change in production!)
SESSION_SECRET=changeme_in_production
# Secret for signing JWTs (change in production!)
JWT_SECRET=devsecret_change_in_production

# --- Figma Integration (Optional) ---
# Figma OAuth 2.0 client ID (from figma.com app settings)
FIGMA_CLIENT_ID=YOUR_FIGMA_CLIENT_ID_HERE
# Figma OAuth 2.0 client secret (keep this secret!)
FIGMA_CLIENT_SECRET=YOUR_FIGMA_SECRET_HERE
# OAuth 2.0 scopes for Figma API access (comma-separated)
FIGMA_OAUTH_SCOPES="file_content:read,file_comments:read,file_comments:write"

# --- Runtime Configuration ---
# Whether to check JWT expiration (set to 'true' to enable)
# CHECK_JWT_EXPIRATION=false
# Environment designation for deployment (staging, production, etc.)
# VITE_STATUS_REPORTS_ENV=development

# --- Error Monitoring (Optional) ---
# Sentry DSN for backend error monitoring
# BACKEND_SENTRY_DSN=YOUR_SENTRY_DSN_HERE

# --- Feature Flags ---
# Enable split shell story prompts (set to 'true' to enable)
# USE_SPLIT_SHELL_STORY_PROMPTS=false
# Save Figma comments to cache for debugging (set to 'true' to enable)
# SAVE_FIGMA_COMMENTS_TO_CACHE=false
# Save Figma sticky notes to cache for debugging (set to 'true' to enable)
# SAVE_FIGMA_NOTES_TO_CACHE=false
# Save Figma semantic XML to cache for debugging (set to 'true' to enable)
# SAVE_FIGMA_SEMANTIC_XML_TO_CACHE=false
# Attempt to stay within View/Collab seat rate limits for Figma comment posting
# When true: posts comments at 5/min (12s delay) to stay within "up to 5/min" Tier 2 limit
# When false: posts comments at 24/min (2.5s delay) for Dev/Full seats
# ATTEMPT_TO_STAY_WITHIN_VIEW_SEAT_LIMIT=false